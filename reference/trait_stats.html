<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="description" content="Calculation of statistics and proportions of taxon traits for plot
observations or groups of observations, considering data relationships,
taxonomic ranks and the handling of not available values.
The function trait_stats() calculates statistics for numeric variables,
while the function trait_proportion() may be used for
categorical variables. In the first case, a column with the name of the
variable and a suffix will be generated, while in the second case, one
additional column per selected trait level will be calculated.
Both mentioned functions offer the alternative weighted and unweighted
calculations (e.g. calculations weighted by the abundance of species). In
the particular case of trait_stats(), customized functions have to be
defined as foo(x, w, ...), where w is the weight.
With the arguments taxon_level and merge_to the used taxonomic ranks
can be defined, where the first one indicates which ranks
have to be considered in the calculations and the second one determine the
aggregation of taxa from a lower level to a parental one.
Formula methods allow for the calculation of multiple variables at once. The
formulas have to be written as trait_1 + ... + trait_n ~ head_var."><title>Statistics and proportion for taxon traits — trait_stats • vegtable</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.1.3/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.1.3/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- bootstrap-toc --><script src="https://cdn.rawgit.com/afeld/bootstrap-toc/v1.0.1/dist/bootstrap-toc.min.js"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Statistics and proportion for taxon traits — trait_stats"><meta property="og:description" content="Calculation of statistics and proportions of taxon traits for plot
observations or groups of observations, considering data relationships,
taxonomic ranks and the handling of not available values.
The function trait_stats() calculates statistics for numeric variables,
while the function trait_proportion() may be used for
categorical variables. In the first case, a column with the name of the
variable and a suffix will be generated, while in the second case, one
additional column per selected trait level will be calculated.
Both mentioned functions offer the alternative weighted and unweighted
calculations (e.g. calculations weighted by the abundance of species). In
the particular case of trait_stats(), customized functions have to be
defined as foo(x, w, ...), where w is the weight.
With the arguments taxon_level and merge_to the used taxonomic ranks
can be defined, where the first one indicates which ranks
have to be considered in the calculations and the second one determine the
aggregation of taxa from a lower level to a parental one.
Formula methods allow for the calculation of multiple variables at once. The
formulas have to be written as trait_1 + ... + trait_n ~ head_var."><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">vegtable</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.1.8</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="nav-item">
  <a class="nav-link" href="../news/index.html">Changelog</a>
</li>
      </ul><form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off"></form>

      <ul class="navbar-nav"><li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/kamapu/vegtable/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div>

    
  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="" class="logo" alt=""><h1>Statistics and proportion for taxon traits</h1>
      <small class="dont-index">Source: <a href="https://github.com/kamapu/vegtable/blob/HEAD/R/trait_stats.R" class="external-link"><code>R/trait_stats.R</code></a></small>
      <div class="d-none name"><code>trait_stats.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Calculation of statistics and proportions of taxon traits for plot
observations or groups of observations, considering data relationships,
taxonomic ranks and the handling of not available values.</p>
<p>The function <code>trait_stats()</code> calculates statistics for numeric variables,
while the function <code>trait_proportion()</code> may be used for
categorical variables. In the first case, a column with the name of the
variable and a suffix will be generated, while in the second case, one
additional column per selected trait level will be calculated.</p>
<p>Both mentioned functions offer the alternative weighted and unweighted
calculations (e.g. calculations weighted by the abundance of species). In
the particular case of <code>trait_stats()</code>, customized functions have to be
defined as <code>foo(x, w, ...)</code>, where <code>w</code> is the weight.</p>
<p>With the arguments <code>taxon_level</code> and <code>merge_to</code> the used taxonomic ranks
can be defined, where the first one indicates which ranks
have to be considered in the calculations and the second one determine the
aggregation of taxa from a lower level to a parental one.</p>
<p>Formula methods allow for the calculation of multiple variables at once. The
formulas have to be written as <code>trait_1 + ... + trait_n ~ head_var</code>.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">trait_stats</span><span class="op">(</span><span class="va">trait</span>, <span class="va">object</span>, <span class="va">...</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># S4 method for character,vegtable</span></span>
<span><span class="fu">trait_stats</span><span class="op">(</span></span>
<span>  <span class="va">trait</span>,</span>
<span>  <span class="va">object</span>,</span>
<span>  <span class="va">FUN</span>,</span>
<span>  <span class="va">head_var</span>,</span>
<span>  <span class="va">taxon_level</span>,</span>
<span>  <span class="va">merge_to</span>,</span>
<span>  <span class="va">weight</span>,</span>
<span>  suffix <span class="op">=</span> <span class="st">"_stats"</span>,</span>
<span>  in_header <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  <span class="va">...</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># S4 method for formula,vegtable</span></span>
<span><span class="fu">trait_stats</span><span class="op">(</span><span class="va">trait</span>, <span class="va">object</span>, <span class="va">weight</span>, suffix <span class="op">=</span> <span class="st">"_stats"</span>, in_header <span class="op">=</span> <span class="cn">TRUE</span>, <span class="va">...</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">trait_proportion</span><span class="op">(</span><span class="va">trait</span>, <span class="va">object</span>, <span class="va">...</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># S4 method for character,vegtable</span></span>
<span><span class="fu">trait_proportion</span><span class="op">(</span></span>
<span>  <span class="va">trait</span>,</span>
<span>  <span class="va">object</span>,</span>
<span>  <span class="va">head_var</span>,</span>
<span>  <span class="va">trait_level</span>,</span>
<span>  <span class="va">taxon_level</span>,</span>
<span>  <span class="va">merge_to</span>,</span>
<span>  include_nas <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  <span class="va">weight</span>,</span>
<span>  suffix <span class="op">=</span> <span class="st">"_prop"</span>,</span>
<span>  in_header <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  <span class="va">...</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># S4 method for formula,vegtable</span></span>
<span><span class="fu">trait_proportion</span><span class="op">(</span><span class="va">trait</span>, <span class="va">object</span>, in_header <span class="op">=</span> <span class="cn">FALSE</span>, <span class="va">...</span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>
    <dl><dt>trait</dt>
<dd><p>Either a character value indicating the name of trait variable
or a formula including both arguments, <code>trait</code> and <code>head_var</code>.</p></dd>


<dt>object</dt>
<dd><p>A <a href="vegtable-class.html">vegtable</a> object.</p></dd>


<dt>...</dt>
<dd><p>Further arguments passed among methods. In the case of the
formula method, arguments are passed to the character method.</p></dd>


<dt>FUN</dt>
<dd><p>A function usually defined as <code>foo(x, ...)</code> or as
<code>foo(x, w, ...)</code> for weighted statistics.</p></dd>


<dt>head_var</dt>
<dd><p>Character value, the name of the variable at slot header to
be used as aggregation level for the calculation of statistics or
proportions.
If not provided, the function will use <strong>ReleveID</strong> by default.</p></dd>


<dt>taxon_level</dt>
<dd><p>Character value indicating a selected taxonomic rank for
the output.</p></dd>


<dt>merge_to</dt>
<dd><p>Character value indicating the taxonomic rank for
aggregation of taxa.
All ranks lower than the one indicated here will be assigned to the
respective parents at the required taxonomic rank.</p></dd>


<dt>weight</dt>
<dd><p>Character value indicating the name of the variable at slot
<strong>samples</strong> used as weight for the proportions. Usually the numeric
abundance.</p></dd>


<dt>suffix</dt>
<dd><p>A suffix added to the name of the trait variable or to the
levels of categorical trait variables. I is meant to avoid homonymous
variables within the same object.</p></dd>


<dt>in_header</dt>
<dd><p>Logical value indicating whether the output should be
inserted in the slot <b>header</b> or provided as data frame.</p></dd>


<dt>trait_level</dt>
<dd><p>Character vector indicating a selection of levels from a
trait, in the case that some levels should be ignored in the output.
Trait levels that are skipped at output will be still used for the
calculation of proportions.
This argument gets only applied for the character method.</p></dd>


<dt>include_nas</dt>
<dd><p>Logical value indicating whether NAs should be considered
for the calculation of proportions or not.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    

<p>A data frame with the proportions of traits levels or statistics for
the trait variable, or an object of class <a href="vegtable-class.html">vegtable</a> including those
results at the slot <code>header</code>.</p>
    </div>
    <div class="section level2">
    <h2 id="author">Author<a class="anchor" aria-label="anchor" href="#author"></a></h2>
    <p>Miguel Alvarez <a href="mailto:kamapu78@gmail.com">kamapu78@gmail.com</a></p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="co">## Cocktail classification of plots</span></span></span>
<span class="r-in"><span><span class="va">Wetlands_veg</span><span class="op">@</span><span class="va">header</span> <span class="op">&lt;-</span> <span class="fu"><a href="make_cocktail.html">make_cocktail</a></span><span class="op">(</span><span class="va">Wetlands</span>, <span class="va">Wetlands_veg</span>, cover <span class="op">=</span> <span class="st">"percen"</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## Calculation of proportion of Cyperaceae species in the plot</span></span></span>
<span class="r-in"><span><span class="va">Wetlands_veg</span> <span class="op">&lt;-</span> <span class="fu">trait_proportion</span><span class="op">(</span><span class="st">"FAMILY"</span>, <span class="va">Wetlands_veg</span>,</span></span>
<span class="r-in"><span>  trait_level <span class="op">=</span> <span class="st">"Cyperaceae"</span>,</span></span>
<span class="r-in"><span>  weight <span class="op">=</span> <span class="st">"percen"</span>, include_nas <span class="op">=</span> <span class="cn">FALSE</span>, in_header <span class="op">=</span> <span class="cn">TRUE</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## Display of proportions per plant community</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/graphics/boxplot.html" class="external-link">boxplot</a></span><span class="op">(</span><span class="va">Cyperaceae_prop</span> <span class="op">~</span> <span class="va">Syntax</span>, <span class="va">Wetlands_veg</span><span class="op">@</span><span class="va">header</span>, col <span class="op">=</span> <span class="st">"grey"</span><span class="op">)</span></span></span>
<span class="r-err co"><span class="r-pr">#&gt;</span> <span class="error">Error in eval(predvars, data, env):</span> object 'Cyperaceae_prop' not found</span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p></p><p>Developed by Miguel Alvarez.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.6.</p>
</div>

    </footer></div>

  

  

  </body></html>

